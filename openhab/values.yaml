# openhab/values.yaml
image:
  repository: openhab/openhab
  tag: 4.1.3
  pullPolicy: IfNotPresent

service:
  type: ClusterIP
  port: 8080
  ports:
    - name: http
      port: 8080
      targetPort: 8080
    - name: https
      port: 8443
      targetPort: 8443

persistence:
  enabled: true
  accessMode: ReadWriteOnce
  size: 1Gi
  annotations: {}
  storageClass: ""

volumeMounts:
  - name: localtime
    mountPath: /etc/localtime
    readOnly: true
  - name: timezone
    mountPath: /etc/timezone
    readOnly: true
  - name: openhab-addons
    mountPath: /openhab/addons
  - name: openhab-conf
    mountPath: /openhab/conf
  - name: openhab-userdata
    mountPath: /openhab/userdata

volumes:
  - name: localtime
    hostPath:
      path: /etc/localtime
  - name: timezone
    hostPath:
      path: /etc/timezone
  - name: openhab-addons
    hostPath:
      path: /path/to/openhab_addons
  - name: openhab-conf
    hostPath:
      path: /path/to/openhab_conf
  - name: openhab-userdata
    hostPath:
      path: /path/to/openhab_userdata

ingress:
  enabled: true
  className: "nginx"
  annotations:
    kubernetes.io/ingress.className: nginx
    kubernetes.io/tls-acme: "true"
    cert-manager.io/cluster-issuer: selfsigned-issuer
  hosts:
    - host: openhab.ankhmorpork.dw
      paths:
        - path: /
          pathType: Prefix
          backend:
            service:
              name: openhab
              port:
                number: 8080
  tls:
    - secretName: openhab-tls
      hosts:
        - openhab.ankhmorpork.dw

extraEnv:
  - name: CRYPTO_POLICY
    value: "unlimited"
  - name: EXTRA_JAVA_OPTS
    value: "-Duser.timezone=Europe/Vienna"
  - name: OPENHAB_HTTP_PORT
    value: "8080"
  - name: OPENHAB_HTTPS_PORT
    value: "8443"

serviceAccount:
  create: true
  name: "openhab"

autoscaling:
  enabled: false

replicaCount: 1
